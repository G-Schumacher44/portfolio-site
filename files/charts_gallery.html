<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Reports Gallery</title>
  <style>
    :root{
      --bg: #0c0d10;
      --card: #14161a;
      --text: #e9edf1;
      --muted: #a7b0bb;
      --brand: #69c;
      --line: #22262c;
      --ring: rgba(102, 153, 204, 0.25);
    }
    html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";background-image: url('../img/logos/dark_light_logo_centered.png');background-repeat: repeat-y;background-size: auto;background-position: top center;}
    a{color:var(--brand);text-decoration:none}
    a:hover{text-decoration:underline}
    main{max-width:1200px;margin:40px auto;padding:0 20px}
    h1{font-size:1.8rem;margin:0 0 8px 0}
    .back-link{display:inline-block;margin-bottom:16px;color:var(--brand)}
    p{color:var(--muted);max-width:75ch;margin:8px 0 24px;}

    /* Cards */
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:18px}
    .card{background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.01));border:1px solid rgba(255,255,255,.06);border-radius:12px;overflow:hidden;box-shadow:0 1px 0 rgba(255,255,255,.04) inset}
    .card-header{padding:12px 14px;border-bottom:1px solid rgba(255,255,255,.06);display:flex;align-items:center;justify-content:space-between;cursor:pointer;}
    .card-title{font-weight:600}
    .meta{color:var(--muted);font-size:.9rem}
    .thumb-placeholder {
      height: 180px;
      background: rgba(255, 255, 255, 0.02);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      color: var(--muted);
      border-top: 1px solid rgba(255,255,255,.06);
      cursor: pointer;
      transition: background-color 0.2s;
    }
    .thumb-placeholder:hover { background: rgba(255, 255, 255, 0.05); }
    .thumb-placeholder svg { width: 48px; height: 48px; margin-bottom: 8px; stroke-width: 1.5; }
    .card-actions{display:flex;gap:10px;padding:12px 14px;border-top:1px solid rgba(255,255,255,.06);flex-wrap:wrap}
    .btn{display:inline-flex;align-items:center;gap:8px;background:#0b1220;border:1px solid rgba(255,255,255,.08);color:var(--text);padding:8px 12px;border-radius:10px;text-decoration:none;width: fit-content;white-space: nowrap;}
    .btn:hover{border-color:var(--brand);box-shadow:0 0 0 3px var(--ring);}

    /* Modal */
    dialog{width:min(1100px,95vw);height:min(85vh,900px);border:none;border-radius:14px;padding:0;background:var(--card);color:var(--text);}
    dialog::backdrop{background:rgba(0,0,0,.6)}
    .modal-head{display:flex;justify-content:space-between;align-items:center;padding:10px 14px;border-bottom:1px solid rgba(255,255,255,.08)}
    .modal-title{font-weight:600}
    .modal-body{height:calc(100% - 52px)}
    iframe{width:100%;height:100%;border:0;background:white}
    .close{all:unset;cursor:pointer;color:var(--muted);padding:6px 10px;border-radius:8px}
    .close:hover{background:rgba(255,255,255,.06);color:var(--text)}
  </style>
</head>
<body>
  <main>
    <a href="../index.html#projects" class="back-link">&larr; Back to Portfolio</a>
    <h1>Reports Gallery</h1>
    <p>
      Static HTML exports from the <em>Model Evaluation Suite</em>. Click a report's preview area to open it in a modal, or use the buttons for other options.
    </p>

    <section class="grid">
      <!-- Report Card: xgb_demo_01 (dev) -->
      <article class="card" data-src="html_export_reports/static_report_xgb_demo_01.html">
        <header class="card-header">
          <div>
            <div class="card-title">Classification Report — xgb_demo_01</div>
            <div class="meta">Static export · Dev Run</div>
          </div>
        </header>
        <div class="thumb-placeholder">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><line x1="10" y1="9" x2="8" y2="9"/></svg>
          <span>Click to preview</span>
        </div>
        <div class="card-actions">
          <a class="btn" target="_blank" rel="noopener" href="html_export_reports/static_report_xgb_demo_01.html">Open in new tab</a>
          <a class="btn" download href="html_export_reports/static_report_xgb_demo_01.html">Download</a>
        </div>
      </article>

      <!-- Report Card: xgb_demo_01 (production validation) -->
      <article class="card" data-src="html_export_reports/static_report_xgb_demo_01_production_validation.html">
        <header class="card-header">
          <div>
            <div class="card-title">Classification Report — Production Validation</div>
            <div class="meta">Static export · Prod validation</div>
          </div>
        </header>
        <div class="thumb-placeholder">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><line x1="10" y1="9" x2="8" y2="9"/></svg>
          <span>Click to preview</span>
        </div>
        <div class="card-actions">
          <a class="btn" target="_blank" rel="noopener" href="html_export_reports/static_report_xgb_demo_01_production_validation.html">Open in new tab</a>
          <a class="btn" download href="html_export_reports/static_report_xgb_demo_01_production_validation.html">Download</a>
        </div>
      </article>
    </section>
  </main>

  <!-- Modal -->
  <dialog id="reportModal">
    <div class="modal-head">
      <div class="modal-title" id="modalTitle">Report</div>
      <button class="close" id="closeModal">Close ✕</button>
    </div>
    <div class="modal-body">
      <iframe id="reportFrame" src="about:blank" title="Report Viewer"></iframe>
    </div>
  </dialog>

  <script>
  document.addEventListener('DOMContentLoaded', () => {
    // Modal logic
    const modal = document.getElementById('reportModal');
    const frame = document.getElementById('reportFrame');
    const closeBtn = document.getElementById('closeModal');
    const modalTitle = document.getElementById('modalTitle');

    // Check if the browser supports the <dialog> element
    if (typeof HTMLDialogElement === 'undefined' || typeof modal?.showModal !== 'function') {
      // If not supported, just let the "Open in new tab" buttons work.
      return;
    }

    document.querySelectorAll('.card').forEach(card => {
      const src = card.getAttribute('data-src');
      const title = card.querySelector('.card-title')?.textContent?.trim();

      // Make header and placeholder clickable to open the modal
      const clickableAreas = [
        card.querySelector('.card-header'),
        card.querySelector('.thumb-placeholder'),
      ];

      clickableAreas.forEach(area => {
        if (!area) return;
        area.addEventListener('click', () => {
          frame.src = src;
          modalTitle.textContent = title || 'Report';
          if (!modal.open) modal.showModal();
        });
      });
    });

    closeBtn.addEventListener('click', () => {
      frame.src = 'about:blank'; // Clear iframe to stop any activity
      modal.close();
    });

    // Close on backdrop click
    modal.addEventListener('click', (event) => {
      if (event.target === modal) {
        frame.src = 'about:blank';
        modal.close();
      }
    });
  });
  </script>
</body>
</html>