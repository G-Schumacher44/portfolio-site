<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scenario 04: Cart & Customer Behavior Analysis</title>
    <style>
        :root { --bg:#0c0d10; --card:#14161a; --text:#e9edf1; --muted:#a7b0bb; --brand:#69c; --line:#22262c; }
        body {
            margin: 0;
            font-family: Inter, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
        }
        main {
            max-width: 800px;
            margin: 2em auto;
            padding: 2em;
            background: var(--card);
            border: 1px solid var(--line);
            border-radius: 12px;
        }
        h1, h2 {
            color: var(--brand);
            border-bottom: 1px solid var(--line);
            padding-bottom: 8px;
        }
        h1 { font-size: 2rem; }
        h2 { font-size: 1.75rem; margin-top: 2em; }
        p, li { color: var(--text); }
        strong { color: var(--brand); font-weight: 600; }
        code {
            background: var(--bg);
            padding: 0.2em 0.4em;
            border-radius: 4px;
            font-family: monospace;
        }
        ul { list-style: none; padding-left: 0; }
        li { margin-bottom: 0.5em; padding-left: 1.5em; position: relative; }
        li::before {
            content: 'â†’';
            color: var(--brand);
            position: absolute;
            left: 0;
        }
        blockquote {
            border-left: 4px solid var(--brand);
            padding-left: 1em;
            margin-left: 0;
            color: var(--muted);
            font-style: italic;
        }
        hr {
            border: 0;
            border-top: 1px solid var(--line);
            margin: 2em 0;
        }
        .footer-nav { text-align: center; margin-top: 3em; font-size: 0.9em; }
        .footer-nav a { color: var(--brand); text-decoration: none; margin: 0 0.5em; }
        .footer-nav a:hover { text-decoration: underline; }
        .footer-tagline { text-align: center; color: var(--muted); margin-top: 1em; font-size: 0.9em; }
    </style>
</head>
<body>
    <main>
        <h1>ğŸ›’ Scenario 04: Cart & Customer Behavior Analysis</h1>
        <h2>ğŸ§­ Background</h2>
        <p>As acquisition scales, leadership has noticed that <strong>a large share of revenue is lost at the cart stage</strong>. Customers add products, but many never convert â€” and thereâ€™s little visibility into why. With new cart data available, the Growth & Retention team wants to understand <strong>who abandons, what they abandon, and which customers are most likely to re-engage</strong>.</p>
        <p>This scenario pushes beyond descriptive inventory/retention audits into <strong>behavioral analysis</strong>, where business rules and assumptions must be made explicit (e.g., what counts as a â€œconverted cart,â€ how to link carts to orders, what time windows to use).</p>
        <hr>
        <h2>ğŸ§‘â€ğŸ’¼ Stakeholder</h2>
        <p><strong>Name:</strong> Director of Growth & Retention<br>
        <strong>Objective:</strong> Reduce abandonment, recover lost revenue, and guide re-engagement campaigns based on real customer behavior.</p>
        <hr>
        <h2>ğŸ¯ Business Objective</h2>
        <p>Build a SQL-driven diagnostic that:</p>
        <ul>
            <li>Maps the <strong>cart funnel</strong> (open â†’ converted vs abandoned) over time.</li>
            <li>Quantifies the <strong>value left behind in abandoned carts</strong> and identifies top SKUs/categories driving that leakage.</li>
            <li>Segments cart behavior by <strong>customer attributes</strong> (signup channel, loyalty tier, CLV bucket).</li>
            <li>Measures <strong>re-engagement</strong> (orders placed within 7 days of abandonment) to surface â€œsavableâ€ customers.</li>
            <li>Analyzes <strong>time-to-order</strong> for converted carts to understand purchase lag.</li>
        </ul>
        <hr>
        <h2>ğŸ§© Available Data</h2>
        <ul>
            <li><code>shopping_carts</code> â†’ <code>cart_id</code>, <code>customer_id</code>, <code>created_at</code>, <code>status</code><br>
            <em>(normalize with <code>LOWER(TRIM(status))</code> to handle case variants)</em></li>
            <li><code>cart_items</code> â†’ <code>cart_id</code>, <code>product_id</code>, <code>quantity</code>, <code>unit_price</code><br>
            <em>(dedupe on <code>(cart_id, product_id)</code> when aggregating SKUs)</em></li>
            <li><code>customers</code> â†’ <code>customer_id</code>, <code>signup_channel</code>, <code>loyalty_tier</code>, <code>clv_bucket</code>, <code>signup_date</code></li>
            <li><code>orders</code> â†’ <code>order_id</code>, <code>customer_id</code>, <code>order_date</code></li>
            <li><code>product_catalog</code> â†’ product attributes for SKU/category rollups</li>
        </ul>
        <hr>
        <h2>ğŸ› ï¸ Key Metrics</h2>
        <ul>
            <li><strong>Cart Conversion Rate</strong> = converted Ã· total carts</li>
            <li><strong>Abandonment Rate</strong> = abandoned Ã· total carts</li>
            <li><strong>Abandoned Cart Value</strong> = Î£(quantity Ã— unit_price) for abandoned carts</li>
            <li><strong>Top Abandoned SKUs / Categories</strong> by value left</li>
            <li><strong>Re-engagement Rate (7d)</strong> = % of customers with abandoned carts who place an order â‰¤7 days later</li>
            <li><strong>Time-to-Order (converted)</strong> = days from cart creation â†’ first order</li>
        </ul>
        <p>ğŸ›  Note on Data Source:<br>
        This diagnostic uses <code>ecom_retailer_v3.db</code>, a simulated ecommerce dataset with behaviorally plausible customer patterns. All cohorts and metrics are fully reproducible for learning purposes.</p>
        <blockquote>
            <p>âœï¸ Analytical Framing:<br>
            This scenario introduces cohort grouping, temporal analysis, segmentation, and churn proxy signals â€” ideal for building intermediate SQL and customer analytics skills.</p>
        </blockquote>
        <div class="footer-nav">
            <a href="https://github.com/G-Schumacher44/sql_stories_skills_builder/blob/main/README.md" target="_blank" rel="noopener">ğŸ  <b>Main README</b></a>
            &nbsp;Â·&nbsp;
            <a href="https://github.com/G-Schumacher44/sql_stories_skills_builder/blob/main/USAGE.md" target="_blank" rel="noopener">ğŸ“– <b>Usage Guide</b></a>
        </div>
        <div class="footer-tagline">
            <sub>âœ¨ SQL Â· Python Â· Storytelling âœ¨</sub>
        </div>
    </main>
</body>
</html>